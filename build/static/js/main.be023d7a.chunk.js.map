{"version":3,"sources":["config/settings.js","utils/apiUtils.js","utils/JwtTokenParser.js","hooks/useAuth.jsx","components/utils/ToggleContent.jsx","components/utils/Modal.jsx","components/Login.jsx","components/LoginModal.jsx","components/Header.jsx","components/NoMatch.jsx","contexts/StateContext.jsx","components/Content3.jsx","hooks/useFetch.jsx","components/Scrape.jsx","components/Jokes.jsx","components/Home.jsx","components/routes/ProtectedRoute.jsx","components/Unauthorized.jsx","config/Routes.jsx","App.js","index.js"],"names":["backendUrl","handleHttpErrors","res","ok","json","Promise","reject","status","fullError","apiUtils","fetchData","url","opts","a","fetch","makeOptions","method","body","token","headers","Accept","localStorage","getItem","JSON","stringify","getUserAndRoles","jwtTokenParsed","base64","split","replace","jsonPayload","decodeURIComponent","atob","map","c","charCodeAt","toString","slice","join","parse","parseJwt","roles","username","authContext","createContext","useAuth","useContext","ProvideAuth","children","auth","useState","setRoles","jwtToken","setJwtToken","name","setName","isLoggedIn","setIsLoggedIn","isLoading","setIsLoading","history","useHistory","useEffect","user","authenticateRole","role","includes","signIn","password","options","setItem","then","e","alert","message","console","log","signOut","removeItem","push","useProvideAuth","Provider","value","ToggleContent","toggler","content","isVisible","setIsVisible","modalRoot","document","querySelector","Modal","hideModal","containerDiv","createElement","appendChild","addEventListener","keyCode","removeChild","createPortal","LogIn","loginCredentials","setLoginCredentials","Fragment","LoggedIn","handleLogout","LoggedOut","change","evt","target","id","performLogin","pass","preventDefault","onChange","TextField","size","label","variant","Button","color","onClick","LoginModal","togglerColor","show","btnTxt","loginBtn","hide","modalContent","Header","AppBar","position","Toolbar","IconButton","edge","component","NavLink","exact","to","aria-label","Typography","style","flex","noWrap","NoMatch","StateContext","defaultState","past","present","age","email","future","reducer","state","action","type","newPresent","payload","filter","obj","newPast","newFuture","StateProvider","useReducer","dispatch","stateObjects","addState","stateObject","RemoveState","undoState","redoState","isPast","length","isFuture","Content3","object","setObject","handleChange","disabled","index","key","useFetch","response","setResponse","error","setError","Scrape","Backdrop","open","CircularProgress","scrape","title","divCount","bodyCount","Jokes","joke1","joke1Reference","joke2","joke2Reference","Home","ProtectedRoute","authenticatedRoles","rest","render","location","some","r","indexOf","pathname","from","Unauthorized","Routes","path","App","Container","maxWidth","AppWithRouter","StrictMode","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.be023d7a.chunk.js","sourcesContent":["// Has to be the URL WITH(!!!) /api so fetches only needs /jokes /scrape whatever..\nexport const backendUrl = 'https://madsbrandt.codes/ca3/api';\n","import { backendUrl } from '../config/settings';\n\nconst handleHttpErrors = (res) => {\n  if (!res.ok) {\n    return Promise.reject({ status: res.status, fullError: res.json() });\n  }\n  return res.json();\n};\n\nconst makeOptions = (method, body = null, token = true) => {\n  const opts = {\n    method: method,\n    headers: {\n      'Content-type': 'application/json',\n      Accept: 'application/json'\n    }\n  };\n  if (token) {\n    opts.headers['x-access-token'] = localStorage.getItem('jwtToken');\n  }\n  if (body) {\n    opts.body = JSON.stringify(body);\n  }\n  return opts;\n};\n\nconst fetchData = async (url, opts) => {\n  const res = await fetch(`${backendUrl}${url}`, opts);\n  return handleHttpErrors(res);\n};\n\nexport const apiUtils = {\n  fetchData: fetchData,\n  handleHttpErrors: handleHttpErrors,\n  makeOptions: makeOptions\n};\n","const parseJwt = (token) => {\n  var base64Url = token.split('.')[1];\n  var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n  var jsonPayload = decodeURIComponent(\n    atob(base64)\n      .split('')\n      .map(function(c) {\n        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n      })\n      .join('')\n  );\n  return JSON.parse(jsonPayload);\n};\n\nexport const getUserAndRoles = (token) => {\n  const jwtTokenParsed = parseJwt(token);\n  const roles = jwtTokenParsed.roles.split(',');\n  return {\n    username: jwtTokenParsed.username,\n    roles: roles\n  };\n};\n","import React, { useState, useContext, useEffect, createContext } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { apiUtils } from '../utils/apiUtils';\nimport { getUserAndRoles } from '../utils/JwtTokenParser';\n\nconst authContext = createContext();\n\n// Hook for child components to get the auth object ...\n// ... and re-render when it changes.\n// Returns the auth context..\nexport const useAuth = () => {\n  return useContext(authContext);\n};\n\nconst useProvideAuth = () => {\n  const [roles, setRoles] = useState(null);\n  const [jwtToken, setJwtToken] = useState();\n  const [name, setName] = useState(null);\n  const [isLoggedIn, setIsLoggedIn] = useState();\n  const [isLoading, setIsLoading] = useState(false);\n\n  const history = useHistory();\n\n  useEffect(() => {\n    // Checks logged in\n    setJwtToken(localStorage.getItem('jwtToken'));\n    setIsLoggedIn(!!jwtToken);\n\n    // Set roles\n    if (jwtToken) {\n      const { username, roles } = getUserAndRoles(jwtToken);\n      setName(username);\n      setRoles(roles);\n    }\n  }, [jwtToken]);\n\n  const signIn = async (username, password) => {\n    const options = apiUtils.makeOptions('POST', {\n      username: username,\n      password: password\n    });\n\n    try {\n      setIsLoading(true);\n      const res = await apiUtils.fetchData('/login', options);\n      setName(res.username);\n      setJwtToken(res.token);\n      localStorage.setItem('jwtToken', res.token);\n      setRoles(res.roles);\n    } catch (error) {\n      if (error.status) {\n        error.fullError.then((e) => alert(e.message));\n      } else {\n        console.log('Network error');\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const signOut = () => {\n    setName(null);\n    setJwtToken(null);\n    localStorage.removeItem('jwtToken');\n    history.push('/');\n  };\n\n  const authenticateRole = (role) => {\n    return isLoggedIn && roles.includes(role);\n  };\n\n  // Return user object and auth methods\n  return {\n    user: {\n      name,\n      roles,\n      authenticateRole,\n      jwtToken,\n      isLoggedIn\n    },\n    signIn,\n    signOut,\n    isLoading\n  };\n};\n\n// In order to use the context, we have to provide it...\nconst ProvideAuth = ({ children }) => {\n  const auth = useProvideAuth();\n  return <authContext.Provider value={auth}>{children}</authContext.Provider>;\n};\n\nexport default ProvideAuth;\n","import React, { useState } from 'react';\n\nconst ToggleContent = ({ toggler, content }) => {\n  const [isVisible, setIsVisible] = useState(false);\n  const show = () => setIsVisible(true);\n  const hide = () => setIsVisible(false);\n\n  return (\n    <>\n      {toggler(show)}\n      {isVisible && content(hide)}\n    </>\n  );\n};\n\nexport default ToggleContent;\n","import { useEffect } from 'react';\nimport { createPortal } from 'react-dom';\n\nconst modalRoot = document.querySelector('#modal');\n\nconst Modal = ({ children, hideModal }) => {\n  const containerDiv = document.createElement('div');\n\n  useEffect(() => {\n    modalRoot.appendChild(containerDiv);\n    function keyListener(e) {\n      if (e.keyCode === 27) {\n        hideModal();\n      }\n    }\n    document.addEventListener('keydown', keyListener);\n    return () => modalRoot.removeChild(containerDiv);\n  }, [containerDiv, hideModal]);\n\n  return createPortal(children, containerDiv);\n};\n\nexport default Modal;\n","import React, { useState } from 'react';\nimport { Button, TextField } from '@material-ui/core';\nimport { useAuth } from '../hooks/useAuth.jsx';\n\nexport default function LogIn({ hideModal }) {\n  const {\n    user: { isLoggedIn },\n    signIn,\n    signOut\n  } = useAuth();\n  const init = { username: '', password: '' };\n  const [loginCredentials, setLoginCredentials] = useState(init);\n\n  const handleLogout = () => {\n    signOut();\n    hideModal();\n  };\n\n  const handleLogin = (user, pass) => {\n    signIn(user, pass);\n    hideModal();\n  };\n\n  const performLogin = (evt) => {\n    evt.preventDefault();\n    handleLogin(loginCredentials.username, loginCredentials.password);\n  };\n  const onChange = (evt) => {\n    setLoginCredentials({\n      ...loginCredentials,\n      [evt.target.id]: evt.target.value\n    });\n  };\n\n  return (\n    <React.Fragment>\n      {isLoggedIn ? (\n        <LoggedIn handleLogout={handleLogout} />\n      ) : (\n        <LoggedOut change={onChange} performLogin={performLogin} />\n      )}\n    </React.Fragment>\n  );\n}\n\nfunction LoggedOut({ performLogin, change }) {\n  return (\n    <div>\n      <h2>Login</h2>\n      <form onChange={change}>\n        <TextField\n          size='small'\n          id='username'\n          label='User Name'\n          variant='outlined'\n        />\n        <TextField\n          size='small'\n          id='password'\n          label='Password'\n          variant='outlined'\n        />\n        <Button variant='outlined' color='primary' onClick={performLogin}>\n          Login\n        </Button>\n      </form>\n    </div>\n  );\n}\n\nfunction LoggedIn({ handleLogout }) {\n  return (\n    <div>\n      <h2>Logout</h2>\n      <button onClick={handleLogout}>Logout</button>\n    </div>\n  );\n}\n","import React from 'react';\nimport ToggleContent from './utils/ToggleContent.jsx';\nimport Modal from './utils/Modal.jsx';\nimport LogIn from '../components/Login.jsx';\nimport { Button } from '@material-ui/core';\nimport { useAuth } from '../hooks/useAuth.jsx';\n\nconst LoginModal = ({ togglerColor = 'default' }) => {\n  const {\n    user: { isLoggedIn }\n  } = useAuth();\n\n  // Toggler\n  const loginBtn = (show) => {\n    const btnTxt = isLoggedIn ? 'Logout' : 'Login';\n    return (\n      <Button variant='contained' color={togglerColor} onClick={show}>\n        {btnTxt}\n      </Button>\n    );\n  };\n\n  // Content\n  const modalContent = (hide) => {\n    return (\n      <Modal hideModal={hide}>\n        <LogIn hideModal={hide} />\n      </Modal>\n    );\n  };\n\n  return (\n    <ToggleContent\n      toggler={(show) => loginBtn(show)}\n      content={(hide) => modalContent(hide)}\n    />\n  );\n};\n\nexport default LoginModal;\n","import React from 'react';\nimport { NavLink } from 'react-router-dom';\nimport { AppBar, IconButton, Typography, Toolbar } from '@material-ui/core';\nimport HomeIcon from '@material-ui/icons/Home';\nimport { useAuth } from '../hooks/useAuth.jsx';\nimport LoginModal from './LoginModal.jsx';\n\nexport default function Header() {\n  const {\n    user: { isLoggedIn, name, roles, authenticateRole }\n  } = useAuth();\n\n  return (\n    <AppBar position='static'>\n      <Toolbar variant='dense'>\n        <IconButton\n          edge='start'\n          component={NavLink}\n          exact\n          to='/'\n          color='inherit'\n          aria-label='home'\n        >\n          <HomeIcon />\n        </IconButton>\n        {isLoggedIn && (\n          <IconButton component={NavLink} to='/jokes' color='inherit'>\n            Jokes\n          </IconButton>\n        )}\n        {authenticateRole('admin') && (\n          <IconButton component={NavLink} to='/scrape' color='inherit'>\n            Scrape\n          </IconButton>\n        )}\n        <IconButton component={NavLink} to='/content3' color='inherit'>\n          Content 3\n        </IconButton>\n        {isLoggedIn && (\n          <Typography style={{ flex: 1 }} variant='h6' noWrap>\n            username: {name}, roles: {roles.join(', ')}\n          </Typography>\n        )}\n        <LoginModal />\n      </Toolbar>\n    </AppBar>\n  );\n}\n","import React from \"react\";\n\nexport default function NoMatch() {\n  return <h1>No pages matches this path</h1>;\n}\n","import React, { useReducer, createContext } from \"react\";\nimport id from \"uuid/v4\";\n\nexport const StateContext = createContext();\n\nconst STATE_ADD = \"STATE_ADD\";\nconst STATE_REMOVE = \"STATE_REMOVE\";\nconst STATE_UNDO = \"STATE_UNDO\";\nconst STATE_REDO = \"STATE_REDO\";\n\nconst initialState = [\n  { id: id(), name: \"test1\", age: 20, email: \"hej@hej1.dk\" },\n  { id: id(), name: \"test2\", age: 21, email: \"hej@hej2.dk\" },\n  { id: id(), name: \"test3\", age: 22, email: \"hej@hej3.dk\" }\n];\n\nconst defaultState = {\n  past: [],\n  present: initialState,\n  future: []\n};\n\nconst reducer = (state = defaultState, action) => {\n  if (action.type === STATE_ADD) {\n    const newPresent = [\n      {\n        id: id(),\n        ...action.payload\n      },\n      ...state.present\n    ];\n    return {\n      past: [state.present, ...state.past],\n      present: newPresent,\n      future: []\n    };\n  }\n\n  if (action.type === STATE_REMOVE) {\n    const newPresent = state.present.filter(\n      obj => obj.id !== action.payload.id\n    );\n    return {\n      past: [state.present, ...state.past],\n      present: newPresent,\n      future: []\n    };\n  }\n\n  if (action.type === STATE_UNDO) {\n    const [newPresent, ...newPast] = state.past;\n    return {\n      past: newPast,\n      present: newPresent,\n      future: [state.present, ...state.future]\n    };\n  }\n\n  if (action.type === STATE_REDO) {\n    const [newPresent, ...newFuture] = state.future;\n    return {\n      past: [state.present, ...state.past],\n      present: newPresent,\n      future: [...newFuture]\n    };\n  }\n  return state;\n};\n\nexport const StateProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(reducer, defaultState);\n  const stateObjects = state.present;\n  const isPast = !!state.past.length;\n  const isFuture = !!state.future.length;\n\n  const addState = stateObject => {\n    dispatch({\n      type: STATE_ADD,\n      payload: {\n        ...stateObject\n      }\n    });\n  };\n\n  const RemoveState = id => {\n    dispatch({\n      type: STATE_REMOVE,\n      payload: {\n        id\n      }\n    });\n  };\n\n  const undoState = () => {\n    dispatch({\n      type: STATE_UNDO\n    });\n  };\n\n  const redoState = () => {\n    dispatch({\n      type: STATE_REDO\n    });\n  };\n\n  const value = {\n    stateObjects,\n    addState,\n    RemoveState,\n    undoState,\n    redoState,\n    isPast,\n    isFuture\n  };\n  return (\n    <StateContext.Provider value={value}>{children}</StateContext.Provider>\n  );\n};\n","import React, { useState, useContext } from \"react\";\nimport { StateContext } from \"../contexts/StateContext\";\n\nexport default function Content3() {\n  const emptyObject = { name: \"\", age: 0, email: \"\" };\n  const [object, setObject] = useState(emptyObject);\n  const {\n    stateObjects,\n    addState,\n    RemoveState,\n    undoState,\n    redoState,\n    isPast,\n    isFuture\n  } = useContext(StateContext);\n\n  const handleChange = ({ target }) => {\n    setObject({ ...object, [target.id]: target.value });\n  };\n\n  const handleSubmit = () => {\n    addState(object);\n  };\n\n  const handleRemove = id => {\n    RemoveState(id);\n  };\n\n  return (\n    <React.Fragment>\n      <h1>Content 3</h1>\n      <h2>Advanced State management</h2>\n      <button onClick={undoState} disabled={!isPast}>\n        Undo\n      </button>\n      <button onClick={redoState} disabled={!isFuture}>\n        Redo\n      </button>\n      <form>\n        <label>name</label>\n        <input\n          id=\"name\"\n          type=\"text\"\n          value={object.name}\n          onChange={handleChange}\n        />\n        <label>age</label>\n        <input\n          id=\"age\"\n          type=\"Number\"\n          value={object.age}\n          onChange={handleChange}\n        />\n        <label>email</label>\n        <input\n          id=\"email\"\n          type=\"text\"\n          value={object.email}\n          onChange={handleChange}\n        />\n        <br />\n        <button onClick={handleSubmit}>Add</button>\n      </form>\n      <ul>\n        {stateObjects.map((obj, index) => (\n          <React.Fragment key={obj.id}>\n            <li>\n              name: {obj.name}, age: {obj.age}, email:{obj.email}\n            </li>\n            <button\n              onClick={() => {\n                handleRemove(obj.id);\n              }}\n            >\n              Remove\n            </button>\n          </React.Fragment>\n        ))}\n      </ul>\n    </React.Fragment>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { backendUrl } from '../config/settings';\n\nconst useFetch = (url, opts) => {\n  const [response, setResponse] = useState(null);\n  const [error, setError] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      setIsLoading(true);\n      try {\n        const res = await fetch(`${backendUrl}${url}`, opts);\n        const json = await res.json();\n        setResponse(json);\n      } catch (err) {\n        setError(err);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    if (url) {\n      fetchData();\n    }\n  }, []);\n\n  return { response, error, isLoading };\n};\n\nexport default useFetch;\n","import React from 'react';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { apiUtils } from '../utils/apiUtils';\nimport useFetch from '../hooks/useFetch.jsx';\n\nexport default function Scrape() {\n  const opts = apiUtils.makeOptions('GET');\n  const { response, isLoading } = useFetch('/scrape', opts);\n\n  if (isLoading) {\n    return (\n      <Backdrop open={true}>\n        <CircularProgress color='inherit' />\n      </Backdrop>\n    );\n  }\n  return (\n    <>\n      <h1>Scrapes</h1>\n      {response &&\n        response.map((scrape) => (\n          <div key={scrape.url}>\n            <p>URL: {scrape.url}</p>\n            <p>Title: {scrape.title}</p>\n            <p>DivCount: {scrape.divCount}</p>\n            <p>BodyCount: {scrape.bodyCount}</p>\n            <br />\n          </div>\n        ))}\n    </>\n  );\n}\n","import React from 'react';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { apiUtils } from '../utils/apiUtils';\nimport useFetch from '../hooks/useFetch.jsx';\n\nconst Jokes = () => {\n  const opts = apiUtils.makeOptions('GET');\n  const { response, isLoading } = useFetch('/jokes', opts);\n\n  if (isLoading) {\n    return (\n      <Backdrop open={true}>\n        <CircularProgress color='inherit' />\n      </Backdrop>\n    );\n  }\n\n  return (\n    <>\n      <h1>Jokes</h1>\n      {response && (\n        <>\n          <p>Joke1: {response.joke1}</p>\n          <p>Joke1 Reference: {response.joke1Reference}</p>\n          <br />\n          <p>Joke2: {response.joke2}</p>\n          <p>Joke2 Reference: {response.joke2Reference}</p>\n        </>\n      )}\n    </>\n  );\n};\n\nexport default Jokes;\n","import React from 'react';\n\nexport default function Home() {\n  return (\n    <>\n      <h1>Mads Brandt</h1>\n      <h2>What i did..</h2>\n      <ul>\n        <li>\n          <div>Cloned Backend startcode</div>\n        </li>\n        <li>\n          <div>Created test users</div>\n        </li>\n        <li>\n          <div>Deployed via travis</div>\n        </li>\n        <li>\n          <div>\n            Dumped users from local DB and transferred them to the droplet DB\n          </div>\n        </li>\n        <li>\n          <div>Cloned the startcode for this project</div>\n        </li>\n        <li>\n          <div>Edited this page</div>\n        </li>\n        <li>\n          <div>Deployed via surge</div>\n        </li>\n      </ul>\n    </>\n  );\n}\n","import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nimport { useAuth } from '../../hooks/useAuth.jsx';\n\nconst ProtectedRoute = ({ children, authenticatedRoles, ...rest }) => {\n  const {\n    user: { isLoggedIn, roles }\n  } = useAuth();\n  return (\n    <Route\n      {...rest}\n      render={({ location }) =>\n        isLoggedIn && roles.some((r) => authenticatedRoles.indexOf(r) >= 0) ? (\n          children\n        ) : (\n          <Redirect\n            to={{\n              pathname: '/unauthorized',\n              state: { from: location }\n            }}\n          />\n        )\n      }\n    />\n  );\n};\n\nexport default ProtectedRoute;\n","import React from 'react';\nimport LoginModal from './LoginModal.jsx';\n\nconst Unauthorized = () => {\n  return (\n    <>\n      <h1>Unauthorized - Please Login</h1>\n      <LoginModal togglerColor='primary' />\n    </>\n  );\n};\n\nexport default Unauthorized;\n","import React from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport NoMatch from '../components/NoMatch.jsx';\nimport Content3 from '../components/Content3.jsx';\nimport Scrape from '../components/Scrape.jsx';\nimport Jokes from '../components/Jokes.jsx';\nimport Home from '../components/Home.jsx';\nimport ProtectedRoute from '../components/routes/ProtectedRoute.jsx';\nimport Unauthorized from '../components/Unauthorized.jsx';\n\nconst Routes = () => {\n  return (\n    <Switch>\n      <Route exact path='/'>\n        <Home />\n      </Route>\n      <ProtectedRoute authenticatedRoles={['admin']} path='/jokes'>\n        <Jokes />\n      </ProtectedRoute>\n\n      <ProtectedRoute authenticatedRoles={['admin']} path='/scrape'>\n        <Scrape />\n      </ProtectedRoute>\n\n      <Route path='/content3'>\n        <Content3 />\n      </Route>\n      <Route path='/unauthorized'>\n        <Unauthorized />\n      </Route>\n      <Route>\n        <NoMatch />\n      </Route>\n    </Switch>\n  );\n};\n\nexport default Routes;\n","import React from 'react';\nimport Header from './components/Header.jsx';\nimport Routes from './config/Routes.jsx';\nimport { Container } from '@material-ui/core/';\nimport ProvideAuth from './hooks/useAuth.jsx';\nimport { StateProvider } from './contexts/StateContext.jsx';\n\nfunction App() {\n  return (\n    <StateProvider>\n      <ProvideAuth>\n        <Header />\n        <Container maxWidth='lg'>\n          <Routes />\n        </Container>\n      </ProvideAuth>\n    </StateProvider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport { HashRouter as Router } from 'react-router-dom';\nimport './style.css';\n\nconst AppWithRouter = () => {\n  return (\n    <React.StrictMode>\n      <Router>\n        <App />\n      </Router>\n    </React.StrictMode>\n  );\n};\n\nReactDOM.render(<AppWithRouter />, document.getElementById('root'));\n"],"sourceRoot":""}