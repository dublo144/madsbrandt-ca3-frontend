(this.webpackJsonpreact_template=this.webpackJsonpreact_template||[]).push([[0],{74:function(e,t,n){e.exports=n(90)},89:function(e,t,n){},90:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(8),c=n.n(l),o=n(17),u=n(120),i=n(121),s=n(122),m=n(123),d=n(64),p=n.n(d),E=n(21),f=n.n(E),h=n(30),v=n(10),g=n(24),b="https://madsbrandt.codes/ca3/api",j=function(e){return e.ok?e.json():Promise.reject({status:e.status,fullError:e.json()})},O={fetchData:function(){var e=Object(h.a)(f.a.mark((function e(t,n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(b).concat(t),n);case 2:return a=e.sent,e.abrupt("return",j(a));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),handleHttpErrors:j,makeOptions:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a={method:e,headers:{"Content-type":"application/json",Accept:"application/json"}};return n&&(a.headers["x-access-token"]=localStorage.getItem("jwtToken")),t&&(a.body=JSON.stringify(t)),a}},k=function(e){var t=function(e){var t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(t).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(n)}(e),n=t.roles.split(",");return{username:t.username,roles:n}},S=Object(a.createContext)(),y=function(){return Object(a.useContext)(S)},C=function(e){var t=e.children,n=function(){var e=Object(a.useState)(null),t=Object(v.a)(e,2),n=t[0],r=t[1],l=Object(a.useState)(),c=Object(v.a)(l,2),o=c[0],u=c[1],i=Object(a.useState)(null),s=Object(v.a)(i,2),m=s[0],d=s[1],p=Object(a.useState)(),E=Object(v.a)(p,2),b=E[0],j=E[1],S=Object(a.useState)(!1),y=Object(v.a)(S,2),C=y[0],T=y[1],x=Object(g.g)();Object(a.useEffect)((function(){if(u(localStorage.getItem("jwtToken")),j(!!o),o){var e=k(o),t=e.username,n=e.roles;d(t),r(n)}}),[o]);return{user:{name:m,roles:n,authenticateRole:function(e){return b&&n.includes(e)},jwtToken:o,isLoggedIn:b},signIn:function(){var e=Object(h.a)(f.a.mark((function e(t,n){var a,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=O.makeOptions("POST",{username:t,password:n}),e.prev=1,T(!0),e.next=5,O.fetchData("/login",a);case 5:l=e.sent,d(l.username),u(l.token),localStorage.setItem("jwtToken",l.token),r(l.roles),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),e.t0.status?e.t0.fullError.then((function(e){return alert(e.message)})):console.log("Network error");case 15:return e.prev=15,T(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}(),signOut:function(){d(null),u(null),localStorage.removeItem("jwtToken"),x.push("/")},isLoading:C}}();return r.a.createElement(S.Provider,{value:n},t)},T=function(e){var t=e.toggler,n=e.content,l=Object(a.useState)(!1),c=Object(v.a)(l,2),o=c[0],u=c[1];return r.a.createElement(r.a.Fragment,null,t((function(){return u(!0)})),o&&n((function(){return u(!1)})))},x=document.querySelector("#modal"),L=function(e){var t=e.children,n=e.hideModal,r=document.createElement("div");return Object(a.useEffect)((function(){return x.appendChild(r),document.addEventListener("keydown",(function(e){27===e.keyCode&&n()})),function(){return x.removeChild(r)}}),[r,n]),Object(l.createPortal)(t,r)},R=n(32),w=n(27),D=n(126),A=n(119);function I(e){var t=e.hideModal,n=y(),l=n.user.isLoggedIn,c=n.signIn,o=n.signOut,u=Object(a.useState)({username:"",password:""}),i=Object(v.a)(u,2),s=i[0],m=i[1];return r.a.createElement(r.a.Fragment,null,l?r.a.createElement(_,{handleLogout:function(){o(),t()}}):r.a.createElement(F,{change:function(e){m(Object(w.a)({},s,Object(R.a)({},e.target.id,e.target.value)))},performLogin:function(e){var n,a;e.preventDefault(),n=s.username,a=s.password,c(n,a),t()}}))}function F(e){var t=e.performLogin,n=e.change;return r.a.createElement("div",null,r.a.createElement("h2",null,"Login"),r.a.createElement("form",{onChange:n},r.a.createElement(D.a,{size:"small",id:"username",label:"User Name",variant:"outlined"}),r.a.createElement(D.a,{size:"small",id:"password",label:"Password",variant:"outlined"}),r.a.createElement(A.a,{variant:"outlined",color:"primary",onClick:t},"Login")))}function _(e){var t=e.handleLogout;return r.a.createElement("div",null,r.a.createElement("h2",null,"Logout"),r.a.createElement("button",{onClick:t},"Logout"))}var J=function(e){var t=e.togglerColor,n=void 0===t?"default":t,a=y().user.isLoggedIn;return r.a.createElement(T,{toggler:function(e){return function(e){var t=a?"Logout":"Login";return r.a.createElement(A.a,{variant:"contained",color:n,onClick:e},t)}(e)},content:function(e){return function(e){return r.a.createElement(L,{hideModal:e},r.a.createElement(I,{hideModal:e}))}(e)}})};function P(){var e=y().user,t=e.isLoggedIn,n=e.name,a=e.roles,l=e.authenticateRole;return r.a.createElement(u.a,{position:"static"},r.a.createElement(i.a,{variant:"dense"},r.a.createElement(s.a,{edge:"start",component:o.b,exact:!0,to:"/",color:"inherit","aria-label":"home"},r.a.createElement(p.a,null)),t&&r.a.createElement(s.a,{component:o.b,to:"/jokes",color:"inherit"},"Jokes"),l("admin")&&r.a.createElement(s.a,{component:o.b,to:"/scrape",color:"inherit"},"Scrape"),r.a.createElement(s.a,{component:o.b,to:"/content3",color:"inherit"},"Content 3"),t&&r.a.createElement(m.a,{style:{flex:1},variant:"h6",noWrap:!0},"username: ",n,", roles: ",a.join(", ")),r.a.createElement(J,null)))}function M(){return r.a.createElement("h1",null,"No pages matches this path")}var N=n(52),U=n(29),B=n(39),z=n.n(B),W=Object(a.createContext)(),G={past:[],present:[{id:z()(),name:"test1",age:20,email:"hej@hej1.dk"},{id:z()(),name:"test2",age:21,email:"hej@hej2.dk"},{id:z()(),name:"test3",age:22,email:"hej@hej3.dk"}],future:[]},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;if("STATE_ADD"===t.type){var n=[Object(w.a)({id:z()()},t.payload)].concat(Object(U.a)(e.present));return{past:[e.present].concat(Object(U.a)(e.past)),present:n,future:[]}}if("STATE_REMOVE"===t.type){var a=e.present.filter((function(e){return e.id!==t.payload.id}));return{past:[e.present].concat(Object(U.a)(e.past)),present:a,future:[]}}if("STATE_UNDO"===t.type){var r=Object(N.a)(e.past),l=r[0],c=r.slice(1);return{past:c,present:l,future:[e.present].concat(Object(U.a)(e.future))}}if("STATE_REDO"===t.type){var o=Object(N.a)(e.future),u=o[0],i=o.slice(1);return{past:[e.present].concat(Object(U.a)(e.past)),present:u,future:Object(U.a)(i)}}return e},q=function(e){var t=e.children,n=Object(a.useReducer)(V,G),l=Object(v.a)(n,2),c=l[0],o=l[1],u={stateObjects:c.present,addState:function(e){o({type:"STATE_ADD",payload:Object(w.a)({},e)})},RemoveState:function(e){o({type:"STATE_REMOVE",payload:{id:e}})},undoState:function(){o({type:"STATE_UNDO"})},redoState:function(){o({type:"STATE_REDO"})},isPast:!!c.past.length,isFuture:!!c.future.length};return r.a.createElement(W.Provider,{value:u},t)};function H(){var e=Object(a.useState)({name:"",age:0,email:""}),t=Object(v.a)(e,2),n=t[0],l=t[1],c=Object(a.useContext)(W),o=c.stateObjects,u=c.addState,i=c.RemoveState,s=c.undoState,m=c.redoState,d=c.isPast,p=c.isFuture,E=function(e){var t=e.target;l(Object(w.a)({},n,Object(R.a)({},t.id,t.value)))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Content 3"),r.a.createElement("h2",null,"Advanced State management"),r.a.createElement("button",{onClick:s,disabled:!d},"Undo"),r.a.createElement("button",{onClick:m,disabled:!p},"Redo"),r.a.createElement("form",null,r.a.createElement("label",null,"name"),r.a.createElement("input",{id:"name",type:"text",value:n.name,onChange:E}),r.a.createElement("label",null,"age"),r.a.createElement("input",{id:"age",type:"Number",value:n.age,onChange:E}),r.a.createElement("label",null,"email"),r.a.createElement("input",{id:"email",type:"text",value:n.email,onChange:E}),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){u(n)}},"Add")),r.a.createElement("ul",null,o.map((function(e,t){return r.a.createElement(r.a.Fragment,{key:e.id},r.a.createElement("li",null,"name: ",e.name,", age: ",e.age,", email:",e.email),r.a.createElement("button",{onClick:function(){var t;t=e.id,i(t)}},"Remove"))}))))}var K=n(127),Q=n(124),X=function(e,t){var n=Object(a.useState)(null),r=Object(v.a)(n,2),l=r[0],c=r[1],o=Object(a.useState)(null),u=Object(v.a)(o,2),i=u[0],s=u[1],m=Object(a.useState)(!1),d=Object(v.a)(m,2),p=d[0],E=d[1];return Object(a.useEffect)((function(){e&&function(){var n=Object(h.a)(f.a.mark((function n(){var a,r;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return E(!0),n.prev=1,n.next=4,fetch("".concat(b).concat(e),t);case 4:return a=n.sent,n.next=7,a.json();case 7:r=n.sent,c(r),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),s(n.t0);case 14:return n.prev=14,E(!1),n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[1,11,14,17]])})));return function(){return n.apply(this,arguments)}}()()}),[]),{response:l,error:i,isLoading:p}};function Y(){var e=O.makeOptions("GET"),t=X("/scrape",e),n=t.response;return t.isLoading?r.a.createElement(K.a,{open:!0},r.a.createElement(Q.a,{color:"inherit"})):r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Scrapes"),n&&n.map((function(e){return r.a.createElement("div",{key:e.url},r.a.createElement("p",null,"URL: ",e.url),r.a.createElement("p",null,"Title: ",e.title),r.a.createElement("p",null,"DivCount: ",e.divCount),r.a.createElement("p",null,"BodyCount: ",e.bodyCount),r.a.createElement("br",null))})))}var Z=function(){var e=O.makeOptions("GET"),t=X("/jokes",e),n=t.response;return t.isLoading?r.a.createElement(K.a,{open:!0},r.a.createElement(Q.a,{color:"inherit"})):r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Jokes"),n&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Joke1: ",n.joke1),r.a.createElement("p",null,"Joke1 Reference: ",n.joke1Reference),r.a.createElement("br",null),r.a.createElement("p",null,"Joke2: ",n.joke2),r.a.createElement("p",null,"Joke2 Reference: ",n.joke2Reference)))};function $(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Mads Brandt"),r.a.createElement("h2",null,"What i did.."),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("div",null,"Cloned Backend startcode")),r.a.createElement("li",null,r.a.createElement("div",null,"Created test users")),r.a.createElement("li",null,r.a.createElement("div",null,"Deployed via travis")),r.a.createElement("li",null,r.a.createElement("div",null,"Dumped users from local DB and transferred them to the droplet DB")),r.a.createElement("li",null,r.a.createElement("div",null,"Cloned the startcode for this project")),r.a.createElement("li",null,r.a.createElement("div",null,"Edited this page")),r.a.createElement("li",null,r.a.createElement("div",null,"Deployed via surge"))))}var ee=n(65),te=function(e){var t=e.children,n=e.authenticatedRoles,a=Object(ee.a)(e,["children","authenticatedRoles"]),l=y().user,c=l.isLoggedIn,o=l.roles;return r.a.createElement(g.b,Object.assign({},a,{render:function(e){var a=e.location;return c&&o.some((function(e){return n.indexOf(e)>=0}))?t:r.a.createElement(g.a,{to:{pathname:"/unauthorized",state:{from:a}}})}}))},ne=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Unauthorized - Please Login"),r.a.createElement(J,{togglerColor:"primary"}))},ae=function(){return r.a.createElement(g.d,null,r.a.createElement(g.b,{exact:!0,path:"/"},r.a.createElement($,null)),r.a.createElement(te,{authenticatedRoles:["admin"],path:"/jokes"},r.a.createElement(Z,null)),r.a.createElement(te,{authenticatedRoles:["admin"],path:"/scrape"},r.a.createElement(Y,null)),r.a.createElement(g.b,{path:"/content3"},r.a.createElement(H,null)),r.a.createElement(g.b,{path:"/unauthorized"},r.a.createElement(ne,null)),r.a.createElement(g.b,null,r.a.createElement(M,null)))},re=n(125);var le=function(){return r.a.createElement(q,null,r.a.createElement(C,null,r.a.createElement(P,null),r.a.createElement(re.a,{maxWidth:"lg"},r.a.createElement(ae,null))))},ce=(n(89),function(){return r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,null,r.a.createElement(le,null)))});c.a.render(r.a.createElement(ce,null),document.getElementById("root"))}},[[74,1,2]]]);
//# sourceMappingURL=main.be023d7a.chunk.js.map